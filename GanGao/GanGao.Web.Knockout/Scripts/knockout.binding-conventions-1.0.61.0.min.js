(function(n,f){if(n.ko===undefined){throw"This library is dependant on Knockout";}String.prototype.endsWith=String.prototype.endsWith?String.prototype.endsWith:function(o){return this.indexOf(o,this.length-o.length)!==-1;};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"");};var b={roots:[n],excludeConstructorNames:["Class"]};var k=false;f.bindingConventions={init:function(o){k=false;f.utils.extend(b,o);},conventionBinders:{}};f.conventionBindingProvider=function(){this.orgBindingProvider=new f.bindingProvider();this.orgNodeHasBindings=this.orgBindingProvider.nodeHasBindings;this.attribute="data-name";this.virtualAttribute="ko name:";};f.conventionBindingProvider.prototype={getMemberName:function(p){var o=null;if(p.nodeType===1){o=p.getAttribute(this.attribute);}else{if(p.nodeType===8){value=""+p.nodeValue||p.text;index=value.indexOf(this.virtualAttribute);if(index>-1){o=value.substring(index+this.virtualAttribute.length).trim();}}}return o;},nodeHasBindings:function(o){return this.orgNodeHasBindings(o)||this.getMemberName(o)!==null;},getBindings:function(q,o){var p=this.getMemberName(q);var r=f.bindingHandlers[p]?null:this.orgBindingProvider.getBindings(q,o);if(p!=null){r=r||{};l(p,q,o,r);}return r;}};f.bindingProvider.instance=new f.conventionBindingProvider();var d=function(q,o){var r=q.split(".");for(var p=0;p<r.length;p++){var o=o[r[p]];}return o;};var l=function(u,s,o,p){var r=o[u]?o[u]:o.$data[u];if(r==null){r=d(u,o.$data);}var x=f.utils.unwrapObservable(r);var w=typeof x;var q=s.__bindingConvention;if(q===undefined){for(var t in f.bindingConventions.conventionBinders){if(f.bindingConventions.conventionBinders[t].rules!==undefined){q=f.bindingConventions.conventionBinders[t];var v=true;if(x==null&&q.deferredApplyIfDataNotSet===true){continue;}if(q.rules.length==1){v=q.rules[0](u,s,p,x,w,r,o.$data,o);}else{a(q.rules,function(y){v=v&&y(u,s,p,x,w,r,o.$data,o);});}if(v){s.__bindingConvention=q;break;}}}}if(s.__bindingConvention===undefined&&x!=null){throw"No convention was found for "+u;}if(s.__bindingConvention!==undefined){s.__bindingConvention.apply(u,s,p,x,w,r,o.$data,o);}};f.bindingConventions.conventionBinders.button={rules:[function(q,p,o,s,r){return p.tagName==="BUTTON"&&r==="function";}],apply:function(t,r,p,v,u,q,w,o){p.click=v;var s=w["can"+e(t)];if(s!==undefined){p.enable=s;}}};f.bindingConventions.conventionBinders.options={rules:[function(q,p,o,r){return p.tagName==="SELECT"&&r.push;}],apply:function(t,r,p,u,x,q,y,o){p.options=u;var w=false;m(t,function(C){var A=e(C);var B=y["selected"+A];if(B===undefined){return false;}p.value=B;var z=y["canChangeSelected"+A];if(z!==undefined){p.enable=z;}w=true;return true;});if(w){return;}var v=e(t);p.selectedOptions=y["selected"+v];var s=y["canChangeSelected"+v];if(s!==undefined){p.enable=s;}}};f.bindingConventions.conventionBinders.input={rules:[function(p,o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA";}],apply:function(t,r,p,v,u,q,w,o){if(u==="boolean"){if(f.utils.ieVersion===undefined){p.attr={type:"checkbox"};}p.checked=q;}else{p.value=q;}var s=w["canChange"+e(t)];if(s!==undefined){p.enable=s;}}};f.bindingConventions.conventionBinders.visible={rules:[function(q,p,o,s,r){return r==="boolean"&&p.tagName!=="INPUT";}],apply:function(s,r,p,u,t,q,v,o){p.visible=q;}};f.bindingConventions.conventionBinders.text={rules:[function(q,p,o,s,r){return r!=="object"&&r!=="boolean"&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!g(p);}],apply:function(s,r,p,u,t,q,v,o){p.text=q;},deferredApplyIfDataNotSet:true};f.bindingConventions.conventionBinders["with"]={rules:[function(q,p,o,s,r){return(r==="object"||s===undefined)&&(s==null||s.push===undefined)&&g(p);}],apply:function(s,r,p,u,t,q,v,o){p["with"]=q;}};f.bindingConventions.conventionBinders.foreach={rules:[function(r,q,p,o){return o&&o.push&&g(q);}],apply:function(t,s,q,o,u,r,v,p){q.foreach=r;}};f.bindingConventions.conventionBinders.template={rules:[function(r,q,p,o,s){return s==="object"&&!g(q);}],apply:function(x,s,q,o,z,v,A,p){var t=o!=null&&o.push!==undefined;var u=o==null||(t&&o.length==0);if(!u){var r=o?c(t?o[0]:o):undefined;var w="Model";var y=null;if(r!==undefined&&r.endsWith(w)){y=r.substring(0,r.length-w.length);if(!y.endsWith("View")){y=y+"View";}}if(y==null){throw"View name could not be found";}}q.template={name:y,"if":v};if(o!=null&&o.push){q.template.foreach=o;}else{q.template.data=o;}},deferredApplyIfDataNotSet:true};var e=function(o){return o.substring(0,1).toUpperCase()+o.substring(1);};var i=[{end:"ies",use:"y"},"es","s"];var m=function(p,o){var q=null;a(i,function(r){append=r.use;r=r.end||r;if(p.endsWith(r)){q=p.substring(0,p.length-r.length);q=q+(append||"");if(o){return !o(q);}return true;}return true;});return q;};var a=function(p,o){for(var q=0;q<p.length;q++){var r=o(p[q]);if(r===false){break;}}};var g=function(o){return(o.nodeType===8&&o.nextSibling.nodeType===1)||(o.nodeType===1&&o.innerHTML.trim()!=="");};var j=function(){var o=[];var p=function(s){if(s===undefined||s.__fcnChecked||s===n){return;}s.__fcnChecked=true;if(s.__fcnChecked===undefined){return;}o.push(s);for(var q in s){var r=s[q];if(r!==undefined&&q.endsWith("Model")&&typeof r==="function"){r.__fcnName=q;}p(r);}};a(b.roots,function(q){p(q);});a(o,function(q){delete q.__fcnChecked;});};var c=function(w,t){var o=t?w:w.constructor;if(o.__fcnName!==undefined){return o.__fcnName;}var r=/function (.{1,})\(/;var x=(r).exec(o.toString());var u=(x&&x.length>1)?x[1]:undefined;var p=false;a(b.excludeConstructorNames,function(y){if(y===u){p=true;return false;}});if(u===undefined||p){var q=[];var v=function(C){if(C===null||C===n.document||C===n.html||C===n.history||C===n.frameElement||typeof C==="function"||C.__fcnChecked===true||(C.location&&C.location!=n.location)){return;}try{C.__fcnChecked=true;}catch(y){return;}if(C.__fcnChecked===undefined){return;}q.push(C);for(var A in C){var B=C[A];if(B===o){return A;}var z=v(B);if(z!==undefined){return z;}}};a(b.roots,function(y){u=v(y);if(u!==undefined){return false;}});for(var s in q){delete q[s].__fcnChecked;}}o.__fcnName=u;return u;};var h=f.applyBindings;f.applyBindings=function(p,o){if(k===false){j();k=true;}h(p,o);};f.bindingConventions.utils={findConstructorName:c,singularize:m,getPascalCased:e};})(window,ko);